---
title: "Git, Github"
author: "Ben Best"
date: "October 1, 2014"
output: 
  html_document:
    toc: true
    self_contained: false
---


## Git Bash

Go to Windows button and start typing "Git Bash" (and enter) to launch program.

Try the commands below. Comments are preceeded with `#` and will not do anything (except inform you). You can copy and paste by right-clicking on the upper bar of the Git Bash window (called MINGW32:/...) and selecting Edit > Paste or to copy from the console Edit > Mark, select text, return to put it in your clipboard.


```bash
# list files and folders
ls

# show present working directory
pwd

# make directory to store your github repositories
mkdir github

# change directory to github
cd github

# clone the class repository
git clone https://github.com/ucsb-bren/esm296-4f.git

# change directory to inside the newly created esm296-4f folder
ls esm296-4f

# look at files in new directory of cloned repository
ls

# change directory back to home, ie H: drive
cd ~
```

## Sign up for Github and Create Courses Repository

You will be turning in assignments through Github which means you'll need to setup a free USER account by visiting [github.com](https://github.com).

Pick any untaken username (you can change it later), use your Bren email (needs a .edu extension for later discount) and set a password. Choose the free account.

[Create a new repository](https://help.github.com/articles/creating-a-new-repository) called `courses` which will be public for now. Yes, Initialize this repository with a README.

Navigate to your courses repository at `http://github.com/USER/courses`. Next, you want to clone the repository to your local machine. Note that the URL can be copied from lower right of the repository main page.

  ![](img/github_clone-url.png)

Now return to the Git Bash shell to clone your courses repository into `H:\github`. 

```bash
# change directory to your github container folder
cd ~/github

# clone your courses repository
git clone https://github.com/USER/courses.git

# change directory to inside the newly created courses folder
cd courses

# tell git YOUR user name and email
git config user.name "FIRST LAST"
git config user.email YOURS@BREN.UCSB.EDU

# tel git to cache your password
git config credential.helper wincred

# check git status of the repository
git status

# make a directory for this course
mkdir esm296-4f

# notice the status is the same after creating a directory
# because no content (ie files) have been added yet
git status

# touch a file in our class folder to create content
touch esm296-4f/README.md

# now git notices "untracked files" in the esm296-4f directory
git status

# add this folder (and by default all the files contained therein)
git add esm296-4f

# now git notes "changes to be committed" with a new file
git status

# commit those changes with a message
git commit -m "adding first github content"

# now git says your branch is ahead of 'origin/master' by 1 commit
git status

# go ahead and push those changes
# git will prompt you for your Github username and password and remember it for future
git push
```

Ok, now you have two way pull and push capability with your Github courses repository. Wouldn't it be nice though to not have to use the command line every time you add a file?

## RStudio

Entrez RStudio which provides a handy little interface for basic git commands.

Launch the RStudio program. First, let's configure RStudio to play nicely with git. Go to the menu Tools > Global Options...

- Git/SVN > Git executable: Browse... and paste `C:\Program Files (x86)\Git\bin\git.exe`

- R General
    - untick: Restore .Rdata into workspace at startup
    - Save workspace to .RData on exit: Never
    
- OK, and restart RStudio

Notice the panes in the upper right: Environment, History. Go to menu File > Open Project... (or in furthest upper right Project: (None) > Open Project...) and navigate to `H:\github\esm296-4f\esm296-4f.Rproj`. This is an RStudio project file that simply points to a folder and retains project specific options. You should now see an extra pane in the upper right: Git.

![](img/rstudio_git-pane.png)

To synchronize the course content on Github with your local H drive, all you need to do is click the blue down arrow. This is equivalent to the following command in the Git Bash shell:

```bash
cd ~/github/esm296-4f
git pull
```

Let's similarly setup an RStudio project for your courses repo. Go to menu File > New Project... (or in furthest upper right Project: (None) > New Project...) and browse to `H:\github\courses`.

![](img/rstudio_new-project_existing-courses.png)

In the Files pane (lower right) click on README.md, modify the text (simply adding a return will do) in the editor pane. Notice the Git pane in which the newly added file courses.Rproj has a "?" Status indicating it is an "untracked file" like `git status` in the Git Bash previously told us. And now the README.md has a status of "M" for modified. 

![](img/rstudio_git_files-mod-unadded.png)

Now click Commit to get a popup that allows you to tick files or folders (with files inside) to add or confirm modification and enter a commit message (required).

![](img/rstudio_git_commit.png)



## file srxr

- H:/
    - R/
    - github/
        - esm296-4f/ course repo
        - courses/   personal repo
            - esm296-4f/
    - esm296-4f/  workspace, especially for big data files


## github setup

- invite profs: bbest, frew, lwedding?
- create an issue

## git setup

Cloning into 'courses'...
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.

[master 0c8e9e3] adding R setup
 Committer: unknown <bbest_student@frew-test.esm.ucsb.edu>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly:

    git config --global user.name  "Ben Best"
    git config --global user.email "bbest@nceas.ucsb.edu"


After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 1 file changed, 17 insertions(+)
 create mode 100644 wk01_programming/setup_r.R


Cloning into 'courses'...
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.