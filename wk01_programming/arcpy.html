<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Ben Best, Jim Frew" />


<title>Programming in ArcGIS</title>

<script src="arcpy_files/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="arcpy_files/bootstrap-2.3.2/css/bootstrap.min.css" rel="stylesheet" />
<link href="arcpy_files/bootstrap-2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
<script src="arcpy_files/bootstrap-2.3.2/js/bootstrap.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="arcpy_files/highlight/default.css"
      type="text/css" />
<script src="arcpy_files/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
</style>
<div class="container-fluid main-container">


<div id="header">
<h1 class="title">Programming in ArcGIS</h1>
<h4 class="author"><em>Ben Best, Jim Frew</em></h4>
<h4 class="date"><em>October 3, 2014</em></h4>
</div>

<div id="TOC">
<ul>
<li><a href="#git-github">Git, Github</a></li>
<li><a href="#markdown">Markdown</a></li>
<li><a href="#programming-with-python">Programming with Python</a></li>
<li><a href="#something-familiar">Something Familiar</a></li>
<li><a href="#detailed-wind-analysis">Detailed Wind Analysis</a></li>
<li><a href="#noaa-ncdc">NOAA NCDC</a></li>
<li><a href="#u.s.-wind-climatology">U.S. Wind Climatology</a></li>
<li><a href="#arcpy">ArcPy</a></li>
<li><a href="#other-python-skills">Other Python Skills</a><ul>
<li><a href="#final-project-species---gbif">Final Project: Species - GBIF</a></li>
<li><a href="#final-project-species---rgbif">Final Project: Species - rgbif</a></li>
<li><a href="#final-project-species---env-data">Final Project: Species - env data</a></li>
</ul></li>
<li><a href="#old">OLD…</a><ul>
<li><a href="#sea-level-rise">sea level rise</a></li>
<li><a href="#windng">windng</a></li>
<li><a href="#install-windml">Install windml</a></li>
<li><a href="#brief-example">Brief Example</a></li>
</ul></li>
<li><a href="#notes-from-bbest_testfrew-test">notes from <a href="mailto:bbest_test@frew-test">bbest_test@frew-test</a>…</a><ul>
<li><a href="#git-bash">git bash</a><ul>
<li><a href="#setup-name-and-password">Setup name and password</a></li>
<li><a href="#navigating">navigating</a></li>
<li><a href="#copy-paste-in-bash-window">copy / paste in bash window</a></li>
<li><a href="#clone-esm296-4f">clone [esm296-4f]</a></li>
<li><a href="#setup-rstudio-esm296-4f">setup rstudio [esm296-4f]</a></li>
</ul></li>
<li><a href="#file-srxr">file srxr</a></li>
<li><a href="#github-setup">github setup</a></li>
<li><a href="#git-setup">git setup</a></li>
<li><a href="#mget-setup">mget setup</a></li>
</ul></li>
<li><a href="#week-2">Week 2</a><ul>
<li><a href="#finding-out-packages">Finding out packages</a></li>
</ul></li>
<li><a href="#other">Other</a><ul>
<li><a href="#other-recd-software">other rec’d software</a></li>
<li><a href="#mget-readings">MGET readings</a></li>
</ul></li>
</ul>
</div>

<div id="git-github" class="section level2">
<h2>Git, Github</h2>
<ul>
<li><a href="https://github.com/NCEAS/training/blob/master/2014-oss/day-04/git_notes.md">git_notes · NCEAS/training</a></li>
<li><a href="http://software-carpentry.org/v5/novice/ref/02-git.html">git reference</a></li>
<li><a href="http://www.software-carpentry.org/v5/novice/git">http://www.software-carpentry.org/v5/novice/git</a></li>
</ul>
</div>
<div id="markdown" class="section level2">
<h2>Markdown</h2>
<ul>
<li><a href="https://guides.github.com/features/mastering-markdown/">https://guides.github.com/features/mastering-markdown/</a></li>
<li>cheatsheet</li>
<li><a href="https://stackedit.io">https://stackedit.io</a> for side by side</li>
</ul>
<p>Trying out <a href="http://www.emoji-cheat-sheet.com">http://www.emoji-cheat-sheet.com</a> :zap:. Or <a href="https://octicons.github.com">https://octicons.github.com</a> (see <a href="https://octicons.github.com/usage/">usage</a>)?</p>
</div>
<div id="programming-with-python" class="section level2">
<h2>Programming with Python</h2>
<ul>
<li><p><a href="https://github.com/ipython/ipython/wiki/A-gallery-of-interesting-IPython-Notebooks">https://github.com/ipython/ipython/wiki/A-gallery-of-interesting-IPython-Notebooks</a> - the mother load of scientific python computing</p></li>
<li><a href="http://www.software-carpentry.org/v5/novice/python/index.html">http://www.software-carpentry.org/v5/novice/python/index.html</a></li>
<li><p><a href="http://software-carpentry.org/v5/novice/teaching/index.html">Instructor’s Guide</a></p></li>
</ul>
<p>Setup: - <a href="http://software-carpentry.org/v5/setup.html">http://software-carpentry.org/v5/setup.html</a> - <a href="https://github.com/swcarpentry/windows-installer">https://github.com/swcarpentry/windows-installer</a></p>
</div>
<div id="something-familiar" class="section level2">
<h2>Something Familiar</h2>
<ul>
<li>Lab 3: Siting Wind Energy</li>
</ul>
</div>
<div id="detailed-wind-analysis" class="section level2 smaller">
<h2>Detailed Wind Analysis</h2>
<p><a href="http://www.nrel.gov/gis/data_wind.html">NREL Wind Data</a></p>
<p><strong>50-Meter Resolution (50-meter height above surface)</strong></p>
<p>These datasets are geographic shapefiles generated from the original raster data. The original raster data varied in resolution from 200-meter to 1000-meter cell sizes. The data provide an estimate of annual average wind resource for specific states or regions. The data are separated into two distinct groups: NREL produced, and AWS Truepower produced/NREL validated. To learn more, please see <a href="http://www.nrel.gov/gis/wind_detail.html">Wind Data Details</a>.</p>
<p>The NREL-produced map data only applies to areas of low surface roughness (i.e. grassy plains), and excludes areas with slopes greater than 20%. For areas of high surface roughness (i.e. forests), the values shown may need to be reduced by one or more power classes. The TrueWind-produced resource estimates factor in surface roughness in their calculations, and do not exclude areas with slopes greater than 20%.</p>
<p><strong>Data</strong>: California Wind 50m Resolution (<a href="http://www.nrel.gov/gis/data/GIS_Data_Technology_Specific/United_States/Wind/High_Resolution/California_50m_wind.zip">California_50m_wind.zip</a>) 05/18/2012 <a href="http://www.nrel.gov/gis/data/GIS_Data_Technology_Specific/United_States/Wind/metadata/ca_50m_metadata.htm">ca_50m_metadata.htm</a> <a href="https://mapservices.nrel.gov/data_res/wms/kml?layers=data_res:ca_50mwind">CA 50m.kmz</a></p>
</div>
<div id="noaa-ncdc" class="section level2">
<h2>NOAA NCDC</h2>
<p>Links:</p>
<ul>
<li><a href="http://www.ncdc.noaa.gov/cdo-web/datasets">http://www.ncdc.noaa.gov/cdo-web/datasets</a></li>
<li><a href="http://www.ncdc.noaa.gov/data-access/land-based-station-data">http://www.ncdc.noaa.gov/data-access/land-based-station-data</a></li>
<li><a href="http://www.ncdc.noaa.gov/societal-impacts/wind/">http://www.ncdc.noaa.gov/societal-impacts/wind/</a></li>
<li><a href="http://earthpy.org/ulmo.html">Climatology data access with ulmo</a></li>
</ul>
</div>
<div id="u.s.-wind-climatology" class="section level2 smaller">
<h2>U.S. Wind Climatology</h2>
<ul>
<li><a href="ftp://ftp.cdc.noaa.gov/Datasets/ncep.reanalysis.dailyavgs/surface/uwnd.sig995.2013.nc">2013 U-Component Wind Data</a></li>
<li><a href="ftp://ftp.cdc.noaa.gov/Datasets/ncep.reanalysis.dailyavgs/surface/vwnd.sig995.2013.nc">2013 V-Component Wind Data</a></li>
</ul>
<p>To calculate: - monthly mean wind speed (<span class="math">\(s\)</span>) from x (<span class="math">\(u\)</span>) and y (<span class="math">\(v\)</span>) components use Pythagorean theorem:</p>
<p><span class="math">\[
  s = \sqrt{u^2 + v^2}
  \]</span></p>
<ul>
<li>monthly variance in wind angle</li>
<li><a href="http://blogs.esri.com/esri/arcgis/2013/07/17/displaying-speed-and-direction-symbology-from-u-and-v-vectors/">Displaying Speed and Direction Symbology from U and V vectors | ArcGIS Blog</a></li>
</ul>
<p>Could form criteria of thresholds.</p>
<p><img src="img/sig995_wind_201308.gif" /></p>
</div>
<div id="arcpy" class="section level2">
<h2>ArcPy</h2>
<ul>
<li><p><strong>.py</strong> Python script extension</p></li>
<li><p><strong>arcpy</strong> Python module with ArcGIS functionality</p></li>
</ul>
</div>
<div id="other-python-skills" class="section level1">
<h1>Other Python Skills</h1>
<ul>
<li><a href="http://ipython.org/ipython-doc/stable/interactive/tutorial.html">http://ipython.org/ipython-doc/stable/interactive/tutorial.html</a></li>
<li><a href="http://pandas.pydata.org">http://pandas.pydata.org</a></li>
<li><a href="http://www3.kis.uni-freiburg.de/~rrezaei/python.html">scientific python tutorial</a></li>
<li><a href="http://classroom.oceanteacher.org/course/view.php?id=123">Course: Marine GIS Applications (ArcGIS) (2012)</a></li>
<li><a href="http://mgel.env.duke.edu/mget/documentation/arcgis-tutorial/">ArcGIS Tutorial » Marine Geospatial Ecology Tools</a></li>
<li><a href="http://edcommunity.esri.com/Resources/ArcLessons">ArcLessons - EdCommunity - Esri GIS</a></li>
<li><a href="http://video.arcgis.com/channel/11/tutorials/videos">Channel: Tutorials | ArcGIS Video</a></li>
<li><a href="http://resources.arcgis.com/en/Tutorials/">Tutorials | ArcGIS Resources</a></li>
</ul>
<p>books:</p>
<ul>
<li><a href="http://esripress.esri.com/display/index.cfm?fuseaction=display&amp;websiteID=256&amp;moduleID=0">Esri Press | GIS Tutorial for Python Scripting</a></li>
<li><a href="http://esripress.esri.com/display/index.cfm?fuseaction=display&amp;websiteID=224&amp;moduleID=0">Esri Press | Python Scripting for ArcGIS</a></li>
</ul>
<p>training: - <a href="http://training.esri.com/gateway/index.cfm?fa=catalog.webcoursedetail&amp;courseid=2520">Esri Training | Python for Everyone</a> - <a href="http://training.esri.com/gateway/index.cfm?fa=catalog.webCourseDetail&amp;courseID=1868">Esri Training | Using Python in ArcGIS Desktop 10</a> - <a href="http://training.esri.com/gateway/index.cfm?fa=catalog.webCourseDetail&amp;courseid=2523">Esri Training | Creating Python Toolboxes Using ArcGIS 10.1</a></p>
<p>resources: - <a href="http://arcpy.wordpress.com/">http://arcpy.wordpress.com/</a></p>
<div id="final-project-species---gbif" class="section level2">
<h2>Final Project: Species - GBIF</h2>
<p>Get species data from GBIF, eg <a href="http://www.gbif.org/species/5220086">Humpback whale</a>.</p>
<p><img src="img/gbif_humpback_whale.png" /></p>
</div>
<div id="final-project-species---rgbif" class="section level2">
<h2>Final Project: Species - rgbif</h2>
<div class="notes">
<pre class="r"><code># install.packages(c(&#39;rgdal&#39;,&#39;rgeos&#39;), repos=&#39;http://www.stats.ox.ac.uk/pub/RWin&#39;)
# devtools::install_github(&#39;ropensci/rgbif&#39;)</code></pre>
</div>
<pre class="r"><code>suppressPackageStartupMessages(library(rgbif))
key = name_lookup(query=&#39;Humpback whale&#39;, rank=&#39;species&#39;)$data$nubKey[1] # 5220086
dat = occ_search(taxonKey=key, return=&#39;data&#39;, limit=200)
gbifmap(input=dat)</code></pre>
<pre><code>## Rendering map...plotting 192 points</code></pre>
<p><img src="arcpy_files/figure-html/rgbif.png" title="plot of chunk rgbif" alt="plot of chunk rgbif" width="672" /></p>
<p>See: <a href="http://ropensci.org/tutorials/rgbif_tutorial.html">rgbif tutorial</a></p>
</div>
<div id="final-project-species---env-data" class="section level2 smaller">
<h2>Final Project: Species - env data</h2>
<p><a href="http://www.inside-r.org/packages/cran/raster/docs/getData">raster::getData</a> - get geographic data for anywhere in the world</p>
<p>‘alt’ stands for altitude (elevation); the data were aggregated from SRTM 90 m resolution data between -60 and 60 latitude. ‘GADM’ is a database of global administrative boundaries. ‘worldclim’ is a database of global interpolated climate data. ‘SRTM’ refers to the hole-filled CGIAR-SRTM (90 m resolution). ‘countries’ has polygons for all countries at a higher resolution than the ‘wrld_simpl’ data in the maptools pacakge .</p>
<p>Terrestrial:</p>
<ul>
<li><a href="http://srtm.csi.cgiar.org/">CGIAR-CSI SRTM 90m DEM Digital Elevation Database</a></li>
</ul>
<p>Marine:</p>
<p>Either:</p>
<ul>
<li><a href="http://topex.ucsd.edu/WWW_html/srtm30_plus.html">http://topex.ucsd.edu/WWW_html/srtm30_plus.html</a></li>
<li><a href="http://nationalmap.gov/viewer.html">http://nationalmap.gov/viewer.html</a></li>
<li><a href="http://www.cirgis.org/data.html">http://www.cirgis.org/data.html</a> ## Final Project: Ecosystem</li>
</ul>
<p>InVEST documentation, which one?:</p>
<ul>
<li><a href="http://ncp-dev.stanford.edu/~dataportal/invest-releases/documentation/current_release/coastal_protection.html">Wave Attenuation &amp; Erosion Reduction: Coastal Protection</a></li>
<li><a href="http://ncp-dev.stanford.edu/~dataportal/invest-releases/documentation/current_release/coastal_vulnerability.html">Coastal Vulnerability Model</a></li>
</ul>
<p>Rec’d Reading:</p>
<ul>
<li>Guerry, A. D., Ruckelshaus, M. H., Arkema, K. K., Bernhardt, J. R., Guannel, G., Kim, C.-K., … Spencer, J. (2012). <strong>Modeling benefits from nature: using ecosystem services to inform coastal and marine spatial planning</strong>. <em>International Journal of Biodiversity Science, Ecosystem Services &amp; Management</em>, 1–15. <a href="http://dx.doi.org/10.1080/21513732.2011.647835"><a href="doi:10.1080/21513732.2011.647835">doi:10.1080/21513732.2011.647835</a></a></li>
</ul>
</div>
</div>
<div id="old" class="section level1">
<h1>OLD…</h1>
<p>Not using.</p>
<div id="sea-level-rise" class="section level2">
<h2>sea level rise</h2>
<p><a href="http://catalog.data.gov/dataset?q=%22sea+level+rise%22+california&amp;sort=score+desc%2C+name+asc&amp;ext_location=&amp;ext_bbox=&amp;ext_prev_extent=-254.53125%2C-75.84516854027044%2C54.84375%2C83.19489563661588">Search for a Dataset - Data.gov: 19 datasets found for “”sea level rise&quot; california“</a></p>
</div>
<div id="windng" class="section level2">
<h2>windng</h2>
<p>This <a href="http://nbviewer.ipython.org/gist/goyodiaz/4718433/wind_sample.ipynb">windng notebook</a> shows some of the features of windng:</p>
<ul>
<li>Loading wind data files into pandas DataFrame.</li>
<li>Monthly means.</li>
<li>Selection of a reference period.</li>
<li>Long term analysis.</li>
<li>Speed and direction distribution.</li>
<li>Turbulence intensity calculations.</li>
<li>Nicely plotting all that stuff.</li>
</ul>
</div>
<div id="install-windml" class="section level2">
<h2>Install windml</h2>
<p><a href="http://windml.org/index.html">windML</a></p>
<p>The windML framework provides an easy-to-use access to wind data sources within the Python world, building upon numpy, scipy, sklearn, and matplotlib. As a machine learning module, it provides versatile tools for various learning tasks like time-series prediction, classification, clustering, dimensionality reduction, and related tasks.</p>
<p>For windml, need also: <a href="http://scikit-learn.org/stable/install.html">scikit-learn</a>, numpy, scipy</p>
<pre class="bash"><code># change to home dir, make github dir, change there
cd ~; mkdir github; cd github

# install dependancies
pip install -U numpy scipy scikit-learn

# add windml
git clone https://github.com/cigroup-ol/windml.git
export PYTHONPATH=$PYTHONPATH:~/github/windml</code></pre>
</div>
<div id="brief-example" class="section level2">
<h2>Brief Example</h2>
<pre class="python"><code>from windml.datasets.nrel import NREL
from windml.mapping.power_mapping import PowerMapping
from sklearn.neighbors import KNeighborsRegressor
import math

windpark = NREL().get_windpark(NREL.park_id[&#39;tehachapi&#39;], 3, 2004)
target = windpark.get_target()

feature_window, horizon = 3, 3
mapping = PowerMapping()
X = mapping.get_features_park(windpark, feature_window, horizon)
Y = mapping.get_labels_turbine(target, feature_window, horizon)
reg = KNeighborsRegressor(10, &#39;uniform&#39;)

train_to, test_to = int(math.floor(len(X) * 0.5)), len(X)
train_step, test_step = 5, 5
reg = reg.fit(X[0:train_to:train_step], Y[0:train_to:train_step])
y_hat = reg.predict(X[train_to:test_to:test_step])
</code></pre>
</div>
</div>
<div id="notes-from-bbest_testfrew-test" class="section level1">
<h1>notes from <a href="mailto:bbest_test@frew-test">bbest_test@frew-test</a>…</h1>
<ul>
<li><a href="http://cran.r-project.org/web/views/Spatial.html">http://cran.r-project.org/web/views/Spatial.html</a></li>
</ul>
<div id="git-bash" class="section level2">
<h2>git bash</h2>
<div id="setup-name-and-password" class="section level3">
<h3>Setup name and password</h3>
<pre class="bash"><code>git config --global user.name &quot;Ben Best&quot;
git config --global user.email bbest@nceas.ucsb.edu</code></pre>
</div>
<div id="navigating" class="section level3">
<h3>navigating</h3>
<p>Comments preceeded with <code>#</code>.</p>
<pre class="bash"><code># change directory to home
cd ~

# list files and folders
ls

# show present working directory
pwd

# get help on any given command showing other arguments
ls --help

# which path to given command
which git
</code></pre>
</div>
<div id="copy-paste-in-bash-window" class="section level3">
<h3>copy / paste in bash window</h3>
<p>To paste, right click on top bar of window &gt; Edit &gt; Paste.</p>
<p>To copy,</p>
</div>
<div id="clone-esm296-4f" class="section level3">
<h3>clone [esm296-4f]</h3>
<p>git clone <a href="https://github.com/ucsb-bren/esm296-4f.git">https://github.com/ucsb-bren/esm296-4f.git</a></p>
</div>
<div id="setup-rstudio-esm296-4f" class="section level3">
<h3>setup rstudio [esm296-4f]</h3>
<p>Tools &gt; Global Options…</p>
<ul>
<li><p>Git/SVN &gt; Git executable: <code>C:/Program Files (x86)/Git/bin/git.exe</code></p></li>
<li>R General
<ul>
<li>untick: Restore .Rdata into workspace at startup</li>
<li>Save workspace to .RData on exit: Never</li>
</ul></li>
</ul>
<p>File &gt; New Project… Version Control &gt; Git &gt;</p>
<p><a href="https://github.com/bbest/courses.git">https://github.com/bbest/courses.git</a></p>
</div>
</div>
<div id="file-srxr" class="section level2">
<h2>file srxr</h2>
<ul>
<li>H:/
<ul>
<li>R/</li>
<li>github/
<ul>
<li>esm296-4f/ course repo</li>
<li>courses/ personal repo
<ul>
<li>esm296-4f/</li>
</ul></li>
</ul></li>
<li>esm296-4f/ workspace, especially for big data files</li>
</ul></li>
</ul>
</div>
<div id="github-setup" class="section level2">
<h2>github setup</h2>
<ul>
<li>invite profs: bbest, frew, lwedding?</li>
<li>create an issue</li>
</ul>
</div>
<div id="git-setup" class="section level2">
<h2>git setup</h2>
<p>[master 0c8e9e3] adding R setup Committer: unknown <a href="mailto:bbest_student@frew-test.esm.ucsb.edu">bbest_student@frew-test.esm.ucsb.edu</a> Your name and email address were configured automatically based on your username and hostname. Please check that they are accurate. You can suppress this message by setting them explicitly:</p>
<p>After doing this, you may fix the identity used for this commit with:</p>
<pre><code>git commit --amend --reset-author</code></pre>
<p>1 file changed, 17 insertions(+) create mode 100644 wk01_programming/setup_r.R</p>
</div>
<div id="mget-setup" class="section level2">
<h2>mget setup</h2>
<p><a href="http://mgel.env.duke.edu/mget/download/#ArcToolbox">Step 8: Add MGET to your default ArcToolbox window</a></p>
</div>
</div>
<div id="week-2" class="section level1">
<h1>Week 2</h1>
<div id="finding-out-packages" class="section level2">
<h2>Finding out packages</h2>
<p><a href="http://cran.r-project.org/web/views/Spatial.html">http://cran.r-project.org/web/views/Spatial.html</a></p>
</div>
</div>
<div id="other" class="section level1">
<h1>Other</h1>
<div id="other-recd-software" class="section level2">
<h2>other rec’d software</h2>
<ul>
<li>MGET 64-bit</li>
<li>Notepad ++</li>
</ul>
</div>
<div id="mget-readings" class="section level2">
<h2>MGET readings</h2>
<ul>
<li>Roberts et al</li>
</ul>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
